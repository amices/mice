<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Wrapper function that runs MICE in parallel — parlmice • mice</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Wrapper function that runs MICE in parallel — parlmice" />
<meta property="og:description" content="This is a wrapper function for mice, using multiple cores to
execute mice in parallel. As a result, the imputation
procedure can be sped up, which may be useful in general." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mice</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.14.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/oldfriends.html">Help for old friends</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amices/mice/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Wrapper function that runs MICE in parallel</h1>
    <small class="dont-index">Source: <a href='https://github.com/amices/mice/blob/master/R/parlmice.R'><code>R/parlmice.R</code></a></small>
    <div class="hidden name"><code>parlmice.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is a wrapper function for <code><a href='mice.html'>mice</a></code>, using multiple cores to
execute <code><a href='mice.html'>mice</a></code> in parallel. As a result, the imputation
procedure can be sped up, which may be useful in general.</p>
    </div>

    <pre class="usage"><span class='fu'>parlmice</span><span class='op'>(</span>
  <span class='va'>data</span>,
  m <span class='op'>=</span> <span class='fl'>5</span>,
  seed <span class='op'>=</span> <span class='cn'>NA</span>,
  cluster.seed <span class='op'>=</span> <span class='cn'>NA</span>,
  n.core <span class='op'>=</span> <span class='cn'>NULL</span>,
  n.imp.core <span class='op'>=</span> <span class='cn'>NULL</span>,
  cl.type <span class='op'>=</span> <span class='st'>"PSOCK"</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame or matrix containing the incomplete data. Similar to
the first argument of <code><a href='mice.html'>mice</a></code>.</p></td>
    </tr>
    <tr>
      <th>m</th>
      <td><p>The number of desired imputated datasets. By default $m=5$ as with <code>mice</code></p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>A scalar to be used as the seed value for the mice algorithm within
each parallel stream. Please note that the imputations will be the same for all
streams and, hence, this should be used if and only if <code>n.core = 1</code> and
if it is desired to obtain the same output as under <code>mice</code>.</p></td>
    </tr>
    <tr>
      <th>cluster.seed</th>
      <td><p>A scalar to be used as the seed value. It is recommended to put the
seed value here and not outside this function, as otherwise the parallel processes
will be performed with separate, random seeds.</p></td>
    </tr>
    <tr>
      <th>n.core</th>
      <td><p>A scalar indicating the number of cores that should be used.</p></td>
    </tr>
    <tr>
      <th>n.imp.core</th>
      <td><p>A scalar indicating the number of imputations per core.</p></td>
    </tr>
    <tr>
      <th>cl.type</th>
      <td><p>The cluster type. Default value is <code>"PSOCK"</code>. Posix machines (linux, Mac)
generally benefit from much faster cluster computation if <code>type</code> is set to <code>type = "FORK"</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Named arguments that are passed down to function <code><a href='mice.html'>mice</a></code> or
<code>makeCluster</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A mids object as defined by <code><a href='mids-class.html'>mids-class</a></code></p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function relies on package <code><a href='https://rdrr.io/pkg/lattice/man/splom.html'>parallel</a></code>, which is a base
package for R versions 2.14.0 and later. We have chosen to use parallel function
<code>parLapply</code> to allow the use of <code>parlmice</code> on Mac, Linux and Windows
systems. For the same reason, we use the Parallel Socket Cluster (PSOCK) type by default.</p>
<p>On systems other than Windows, it can be hugely beneficial to change the cluster type to
<code>FORK</code>, as it generally results in improved memory handling. When memory issues
arise on a Windows system, we advise to store the multiply imputed datasets,
clean the memory by using <code><a href='https://rdrr.io/r/base/rm.html'>rm</a></code> and <code><a href='https://rdrr.io/r/base/gc.html'>gc</a></code> and make another
run using the same settings.</p>
<p>This wrapper function combines the output of <code>parLapply</code> with
function <code><a href='ibind.html'>ibind</a></code> in <code><a href='mice.html'>mice</a></code>. A <code>mids</code> object is returned
and can be used for further analyses.</p>
<p>Note that if a seed value is desired, the seed should be entered to this function
with argument <code>seed</code>. Seed values outside the wrapper function (in an
R-script or passed to <code><a href='mice.html'>mice</a></code>) will not result to reproducible results.
We refer to the manual of <code><a href='https://rdrr.io/pkg/lattice/man/splom.html'>parallel</a></code> for an explanation on this matter.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Schouten, R. and Vink, G. (2017). parlmice: faster, paraleller, micer.
<a href='https://www.gerkovink.com/parlMICE/Vignette_parlMICE.html'>https://www.gerkovink.com/parlMICE/Vignette_parlMICE.html</a></p>
<p>#'Van Buuren, S. (2018).
<a href='https://stefvanbuuren.name/fimd/parallel-computation.html'><em>Flexible Imputation of Missing Data. Second Edition.</em></a>
Chapman &amp; Hall/CRC. Boca Raton, FL.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/lattice/man/splom.html'>parallel</a></code>, <code>parLapply</code>, <code>makeCluster</code>,
<code><a href='mice.html'>mice</a></code>, <code><a href='mids-class.html'>mids-class</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Gerko Vink, Rianne Schouten</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'># 150 imputations in dataset nhanes, performed by 3 cores</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='va'>imp1</span> <span class='op'>&lt;-</span> <span class='fu'>parlmice</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nhanes</span>, n.core <span class='op'>=</span> <span class='fl'>3</span>, n.imp.core <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># Making use of arguments in mice.</span></span>
<span class='r-in'><span class='va'>imp2</span> <span class='op'>&lt;-</span> <span class='fu'>parlmice</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nhanes</span>, method <span class='op'>=</span> <span class='st'>"norm.nob"</span>, m <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>imp2</span><span class='op'>$</span><span class='va'>method</span></span>
<span class='r-in'><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='va'>imp2</span>, <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>bmi</span> <span class='op'>~</span> <span class='va'>hyp</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='pool.html'>pool</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Stef van Buuren, Karin Groothuis-Oudshoorn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '491b6c2ead7f15b8c26c513b923dd6a0',
    indexName: 'mice',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


