<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Selects predictors according to simple statistics"><title>Quick selection of predictors from the data — quickpred • mice</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick selection of predictors from the data — quickpred"><meta property="og:description" content="Selects predictors according to simple statistics"><meta property="og:image" content="https://amices.org/mice/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mice</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.16.11</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/oldfriends.html">Help for old friends</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/amices/mice/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quick selection of predictors from the data</h1>
      <small class="dont-index">Source: <a href="https://github.com/amices/mice/blob/HEAD/R/quickpred.R" class="external-link"><code>R/quickpred.R</code></a></small>
      <div class="d-none name"><code>quickpred.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Selects predictors according to simple statistics</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">quickpred</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  mincor <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  minpuc <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  include <span class="op">=</span> <span class="st">""</span>,</span>
<span>  exclude <span class="op">=</span> <span class="st">""</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"pearson"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Matrix or data frame with incomplete data.</p></dd>


<dt>mincor</dt>
<dd><p>A scalar, numeric vector (of size <code>ncol(data))</code> or numeric
matrix (square, of size <code>ncol(data)</code> specifying the minimum
threshold(s) against which the absolute correlation in the data is compared.</p></dd>


<dt>minpuc</dt>
<dd><p>A scalar, vector (of size <code>ncol(data))</code> or matrix (square,
of size <code>ncol(data)</code> specifying the minimum threshold(s) for the
proportion of usable cases.</p></dd>


<dt>include</dt>
<dd><p>A string or a vector of strings containing one or more
variable names from <code>names(data)</code>. Variables specified are always
included as a predictor.</p></dd>


<dt>exclude</dt>
<dd><p>A string or a vector of strings containing one or more
variable names from <code>names(data)</code>. Variables specified are always
excluded as a predictor.</p></dd>


<dt>method</dt>
<dd><p>A string specifying the type of correlation. Use
<code>'pearson'</code> (default), <code>'kendall'</code> or <code>'spearman'</code>. Can be
abbreviated.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A square binary matrix of size <code>ncol(data)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates a predictor matrix using the variable selection
procedure described in Van Buuren et al.~(1999, p.~687--688). The function is
designed to aid in setting up a good imputation model for data with many
variables.</p>
<p>Basic workings: The procedure calculates for each variable pair (i.e.
target-predictor pair) two correlations using all available cases per pair.
The first correlation uses the values of the target and the predictor
directly. The second correlation uses the (binary) response indicator of the
target and the values of the predictor. If the largest (in absolute value) of
these correlations exceeds <code>mincor</code>, the predictor will be added to the
imputation set.  The default value for <code>mincor</code> is 0.1.</p>
<p>In addition, the procedure eliminates predictors whose proportion of usable
cases fails to meet the minimum specified by <code>minpuc</code>. The default value
is 0, so predictors are retained even if they have no usable case.</p>
<p>Finally, the procedure includes any predictors named in the <code>include</code>
argument (which is useful for background variables like age and sex) and
eliminates any predictor named in the <code>exclude</code> argument. If a variable
is listed in both <code>include</code> and <code>exclude</code> arguments, the
<code>include</code> argument takes precedence.</p>
<p>Advanced topic: <code>mincor</code> and <code>minpuc</code> are typically specified as
scalars, but vectors and squares matrices of appropriate size will also work.
Each element of the vector corresponds to a row of the predictor matrix, so
the procedure can effectively differentiate between different target
variables. Setting a high values for can be useful for auxiliary, less
important, variables. The set of predictor for those variables can remain
relatively small. Using a square matrix extends the idea to the columns, so
that one can also apply cellwise thresholds.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>quickpred()</code> uses <code><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></code> to convert
factors to numbers through their internal codes. Especially for unordered
factors the resulting quantification may not make sense.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>van Buuren, S., Boshuizen, H.C., Knook, D.L. (1999) Multiple
imputation of missing blood pressure covariates in survival analysis.
<em>Statistics in Medicine</em>, <b>18</b>, 681--694.</p>
<p>van Buuren, S. and Groothuis-Oudshoorn, K. (2011). <code>mice</code>: Multivariate
Imputation by Chained Equations in <code>R</code>. <em>Journal of Statistical
Software</em>, <b>45</b>(3), 1-67. <a href="https://doi.org/10.18637/jss.v045.i03" class="external-link">doi:10.18637/jss.v045.i03</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="mice.html">mice</a></code>, <code><a href="mids-class.html">mids</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Stef van Buuren, Aug 2009</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># default: include all predictors with absolute correlation over 0.1</span></span></span>
<span class="r-in"><span><span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age bmi hyp chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bmi   1   0   1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hyp   1   0   0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chl   1   1   1   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># all predictors with absolute correlation over 0.4</span></span></span>
<span class="r-in"><span><span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span>, mincor <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age bmi hyp chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bmi   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hyp   1   0   0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chl   1   0   1   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># include age and bmi, exclude chl</span></span></span>
<span class="r-in"><span><span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span>, mincor <span class="op">=</span> <span class="fl">0.4</span>, inc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"bmi"</span><span class="op">)</span>, exc <span class="op">=</span> <span class="st">"chl"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age bmi hyp chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bmi   1   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hyp   1   1   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chl   1   1   1   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only include predictors with at least 30% usable cases</span></span></span>
<span class="r-in"><span><span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span>, minpuc <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age bmi hyp chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bmi   1   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hyp   1   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chl   1   1   1   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use low threshold for bmi, and high thresholds for hyp and chl</span></span></span>
<span class="r-in"><span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span>, mincor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pred</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age bmi hyp chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age   0   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bmi   1   0   1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hyp   1   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> chl   1   0   0   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use it directly from mice</span></span></span>
<span class="r-in"><span><span class="va">imp</span> <span class="op">&lt;-</span> <span class="fu"><a href="mice.html">mice</a></span><span class="op">(</span><span class="va">nhanes</span>, pred <span class="op">=</span> <span class="fu">quickpred</span><span class="op">(</span><span class="va">nhanes</span>, minpuc <span class="op">=</span> <span class="fl">0.25</span>, include <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  iter imp variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   1  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   3  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   4  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   5  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   1  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   2  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   3  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   4  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   5  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   1  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   2  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   3  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   4  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   5  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4   1  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4   2  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4   3  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4   4  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4   5  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5   1  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5   2  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5   3  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5   4  bmi  hyp  chl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5   5  bmi  hyp  chl</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stef van Buuren, Karin Groothuis-Oudshoorn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

