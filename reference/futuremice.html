<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Wrapper function that runs MICE in parallel — futuremice • mice</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Wrapper function that runs MICE in parallel — futuremice"><meta name="description" content="This is a wrapper function for mice, using multiple cores to
execute mice in parallel. As a result, the imputation
procedure can be sped up, which may be useful in general. By default,
futuremice distributes the number of imputations m
about equally over the cores."><meta property="og:description" content="This is a wrapper function for mice, using multiple cores to
execute mice in parallel. As a result, the imputation
procedure can be sped up, which may be useful in general. By default,
futuremice distributes the number of imputations m
about equally over the cores."><meta property="og:image" content="https://amices.org/mice/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mice</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.16.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/oldfriends.html">Help for old friends</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/amices/mice/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Wrapper function that runs MICE in parallel</h1>
      <small class="dont-index">Source: <a href="https://github.com/amices/mice/blob/master/R/futuremice.R" class="external-link"><code>R/futuremice.R</code></a></small>
      <div class="d-none name"><code>futuremice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a wrapper function for <code><a href="mice.html">mice</a></code>, using multiple cores to
execute <code><a href="mice.html">mice</a></code> in parallel. As a result, the imputation
procedure can be sped up, which may be useful in general. By default,
<code>futuremice</code> distributes the number of imputations <code>m</code>
about equally over the cores.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">futuremice</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  m <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  parallelseed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  n.core <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  use.logical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  future.plan <span class="op">=</span> <span class="st">"multisession"</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  globals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or matrix containing the incomplete data. Similar to
the first argument of <code><a href="mice.html">mice</a></code>.</p></dd>


<dt id="arg-m">m<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>The number of desired imputated datasets. By default $m=5$ as with
<code>mice</code></p></dd>


<dt id="arg-parallelseed">parallelseed<a class="anchor" aria-label="anchor" href="#arg-parallelseed"></a></dt>
<dd><p>A scalar to be used to obtain reproducible results over
the futures. The default <code>parallelseed = NA</code> will result in a seed value
that is randomly drawn between -999999999 and 999999999.</p></dd>


<dt id="arg-n-core">n.core<a class="anchor" aria-label="anchor" href="#arg-n-core"></a></dt>
<dd><p>A scalar indicating the number of cores that should be used.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>A scalar to be used as the seed value for the mice algorithm
within each parallel stream. Please note that the imputations will be the
same for all streams and, hence, this should be used if and only if
<code>n.core = 1</code> and if it is desired to obtain the same output as under
<code>mice</code>.</p></dd>


<dt id="arg-use-logical">use.logical<a class="anchor" aria-label="anchor" href="#arg-use-logical"></a></dt>
<dd><p>A logical indicating whether logical (<code>TRUE</code>) or
physical (<code>FALSE</code>) CPU's on machine should be used.</p></dd>


<dt id="arg-future-plan">future.plan<a class="anchor" aria-label="anchor" href="#arg-future-plan"></a></dt>
<dd><p>A character indicating how <code>future</code>s are resolved.
The default <code>multisession</code> resolves futures asynchronously (in parallel)
in separate <code>R</code> sessions running in the background. See
<code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></code> for more information on future plans.</p></dd>


<dt id="arg-packages">packages<a class="anchor" aria-label="anchor" href="#arg-packages"></a></dt>
<dd><p>A character vector with additional packages to be used in
<code>mice</code> (e.g., for using external imputation functions).</p></dd>


<dt id="arg-globals">globals<a class="anchor" aria-label="anchor" href="#arg-globals"></a></dt>
<dd><p>A character string with additional functions to be exported to
each future (e.g., user-written imputation functions).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Named arguments that are passed down to function <code><a href="mice.html">mice</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A mids object as defined by <code><a href="mids-class.html">mids-class</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function relies on package <code><a href="https://furrr.futureverse.org/reference/furrr-package.html" class="external-link">furrr</a></code>, which is a
package for R versions 3.2.0 and later. We have chosen to use furrr function
<code>future_map</code> to allow the use of <code>futuremice</code> on Mac, Linux and
Windows systems.</p>

<p>This wrapper function combines the output of <code><a href="https://furrr.futureverse.org/reference/future_map.html" class="external-link">future_map</a></code> with
function <code><a href="ibind.html">ibind</a></code> from the <code><a href="mice.html">mice</a></code> package. A
<code>mids</code> object is returned and can be used for further analyses.</p>
<p>A seed value can be specified in the global environment, which will yield
reproducible results. A seed value can also be specified within the
<code>futuremice</code> call, through specifying the argument
<code>parallelseed</code>. If <code>parallelseed</code> is not specified, a seed value is
drawn randomly by default, and accessible through <code>$parallelseed</code> in the
output object. Hence, results will always be reproducible, regardless of
whether the seed is specified in the global environment, or by setting the
same seed within the function (potentially by extracting the seed from the
<code>futuremice</code> output object.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Volker, T.B. and Vink, G. (2022). futuremice: The future starts today.
<a href="https://www.gerkovink.com/miceVignettes/futuremice/Vignette_futuremice.html" class="external-link">https://www.gerkovink.com/miceVignettes/futuremice/Vignette_futuremice.html</a></p>
<p>Van Buuren, S. (2018).
<a href="https://stefvanbuuren.name/fimd/parallel-computation.html" class="external-link"><em>Flexible Imputation of Missing Data. Second Edition.</em></a>
Chapman &amp; Hall/CRC. Boca Raton, FL.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future</a></code>, <code><a href="https://furrr.futureverse.org/reference/furrr-package.html" class="external-link">furrr</a></code>, <code><a href="https://furrr.futureverse.org/reference/future_map.html" class="external-link">future_map</a></code>,
<code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></code>, <code><a href="mice.html">mice</a></code>, <code><a href="mids-class.html">mids-class</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Thom Benjamin Volker, Gerko Vink</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># 150 imputations in dataset nhanes, performed by 3 cores</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">imp1</span> <span class="op">&lt;-</span> <span class="fu">futuremice</span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes</span>, m <span class="op">=</span> <span class="fl">150</span>, n.core <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Making use of arguments in mice.</span></span></span>
<span class="r-in"><span><span class="va">imp2</span> <span class="op">&lt;-</span> <span class="fu">futuremice</span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes</span>, m <span class="op">=</span> <span class="fl">100</span>, method <span class="op">=</span> <span class="st">"norm.nob"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">imp2</span><span class="op">$</span><span class="va">method</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">imp2</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">bmi</span> <span class="op">~</span> <span class="va">hyp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="pool.html">pool</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stef van Buuren, Karin Groothuis-Oudshoorn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

